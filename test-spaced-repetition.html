<!DOCTYPE html>
<html>
<head>
    <title>Test Spaced Repetition System</title>
</head>
<body>
    <h1>Spaced Repetition Test</h1>
    <div id="results"></div>
    
    <script>
        async function testSpacedRepetition() {
            const API_BASE = 'http://localhost:5001/api';
            const userId = '68ba7187488b0b8b3f463c04';
            const sheets = ['apnaCollege', 'loveBabbar', 'striverA2Z', 'blind75', 'striverSDE'];
            const results = document.getElementById('results');
            
            for (const sheet of sheets) {
                results.innerHTML += `<h3>Testing ${sheet}...</h3>`;
                
                try {
                    // Test adding problem
                    const addResponse = await fetch(`${API_BASE}/custom-spaced-repetition/add-solved?sheetType=${sheet}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'userid': userId
                        },
                        body: JSON.stringify({ problemId: '1' })
                    });
                    
                    if (addResponse.ok) {
                        results.innerHTML += `<p>‚úÖ ${sheet}: Successfully added problem</p>`;
                        
                        // Test getting data
                        const getResponse = await fetch(`${API_BASE}/custom-spaced-repetition/all?sheetType=${sheet}`, {
                            headers: { userid: userId }
                        });
                        
                        if (getResponse.ok) {
                            const data = await getResponse.json();
                            const todayCount = data.customSpacedRepetition?.today?.length || 0;
                            results.innerHTML += `<p>üìä ${sheet}: ${todayCount} problems in today queue</p>`;
                        }
                    } else {
                        results.innerHTML += `<p>‚ùå ${sheet}: Failed to add problem</p>`;
                    }
                } catch (error) {
                    results.innerHTML += `<p>‚ùå ${sheet}: Error - ${error.message}</p>`;
                }
            }
        }
        
        // Run test when page loads
        testSpacedRepetition();
    </script>
</body>
</html>