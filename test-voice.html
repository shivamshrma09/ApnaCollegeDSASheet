<!DOCTYPE html>
<html>
<head>
    <title>Voice Input Test</title>
</head>
<body>
    <h2>Voice Input Test</h2>
    <textarea id="answer" placeholder="Type or speak your answer..." style="width: 300px; height: 100px;"></textarea><br><br>
    <button id="voiceBtn" onclick="toggleVoice()">ðŸŽ¤ Start Voice</button>
    <p id="status"></p>

    <script>
        let recognition = null;
        let isRecording = false;

        function toggleVoice() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                document.getElementById('status').textContent = 'Voice recognition not supported';
                return;
            }

            if (isRecording) {
                if (recognition) recognition.stop();
                return;
            }

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';

            recognition.onstart = () => {
                isRecording = true;
                document.getElementById('voiceBtn').textContent = 'ðŸ”´ Stop';
                document.getElementById('status').textContent = 'Listening...';
            };

            recognition.onresult = (event) => {
                let transcript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    transcript += event.results[i][0].transcript;
                }
                document.getElementById('answer').value += ' ' + transcript;
            };

            recognition.onend = () => {
                isRecording = false;
                document.getElementById('voiceBtn').textContent = 'ðŸŽ¤ Start Voice';
                document.getElementById('status').textContent = 'Stopped';
            };

            recognition.start();
        }
    </script>
</body>
</html>